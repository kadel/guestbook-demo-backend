name: backend
containers:
  - image: quay.io/tomkral/guestbook-demo-backend@sha256:1642bf98ffc96b824b6b63b65cd3240086762ba75d591c397a3c7976eacba470
    env:
      - name: MONGODB_PASSWORD
        valueFrom:
          secretKeyRef:
            name: mongodb-user
            key: MONGODB_PASSWORD
      - name: MONGODB_USERNAME
        valueFrom:
          configMapKeyRef:
            name: mongodb-user
            key: MONGODB_USER
      - name: MONGODB_DATABASE
        valueFrom:
          configMapKeyRef:
            name: mongodb-user
            key: MONGODB_DATABASE
      - name: MONGODB_SERVER
        valueFrom:
          configMapKeyRef:
            name: mongodb-user
            key: MONGODB_SERVER
imagePullPolicy: Always

services:
  - ports:
    - port: 3000
