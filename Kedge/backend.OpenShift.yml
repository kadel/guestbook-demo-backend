name: backend

deploymentConfigs:
- containers:
    - image: ""
      env:
        - name: MONGODB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mongodb-user
              key: MONGODB_PASSWORD
        - name: MONGODB_USERNAME
          valueFrom:
            configMapKeyRef:
              name: mongodb-user
              key: MONGODB_USER
        - name: MONGODB_DATABASE
          valueFrom:
            configMapKeyRef:
              name: mongodb-user
              key: MONGODB_DATABASE
        - name: MONGODB_SERVER
          valueFrom:
            configMapKeyRef:
              name: mongodb-user
              key: MONGODB_SERVER
      imagePullPolicy: Always
  triggers:
    - type: "ImageChange"
      imageChangeParams:
        automatic: true 
        from:
          kind: "ImageStreamTag"
          name: "guestbook-backend:latest"
        containerNames:
          - "backend"

services:
  - ports:
    - port: 3000
